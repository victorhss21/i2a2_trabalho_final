# Tour Extraction System - InteligÃªncia Artificial para ExtraÃ§Ã£o de Dados de CatÃ¡logos TurÃ­sticos

---

## ğŸ‘¥ InformaÃ§Ãµes do Grupo

### Nome do Grupo

- **Grupo 287**

### Integrantes do Grupo
- Bruno LeÃ£o
- Gleice Santos
- Jander Rocha
- Wagner Lemos
- Wilson
- Victor Souza

---

## ğŸ“‹ DescriÃ§Ã£o do Tema do Projeto

### O Que Foi Desenvolvido

O **Tour Extraction System** Ã© uma soluÃ§Ã£o inteligente e automatizada que revoluciona a forma como informaÃ§Ãµes de catÃ¡logos turÃ­sticos em formato PDF sÃ£o extraÃ­das, estruturadas e distribuÃ­das. O sistema utiliza **InteligÃªncia Artificial** (CrewAI com GPT-4o-mini), **processamento de linguagem natural**, **indexaÃ§Ã£o semÃ¢ntica com FAISS** e **OCR integrado** para transformar documentos nÃ£o-estruturados em dados padronizados e prontos para anÃ¡lise.

O sistema foi projetado para **resolver um problema crÃ­tico da indÃºstria de turismo**: a impossibilidade de processar de forma automatizada e padronizada as informaÃ§Ãµes contidas em tarifÃ¡rios, catÃ¡logos de agÃªncias e documentos similares. Enquanto empresas historicamente dependem de entrada manual de dados ou processamento tÃ©cnico manual, o Tour Extraction System oferece uma abordagem totalmente **automatizada, escalÃ¡vel e inteligente**.

### Ganho de Valor para as Empresas

Para as empresas que adotarem esta soluÃ§Ã£o, os benefÃ­cios sÃ£o:

- **ExtraÃ§Ã£o Padronizada de Dados**: Independentemente do formato, idioma ou estrutura do documento PDF, o sistema extrai informaÃ§Ãµes em um formato tabular padronizado e consistente (atualmente, o sistema estÃ¡ especialmente adequado para lidar com arquivos .pdf nos padrÃµes Americano e Europeu)
- **IntegraÃ§Ã£o em Plataformas de Marketplace**: O sistema pode ser embedado nativamente em plataformas de viagens para automatizar o onboarding de agÃªncias parceiras
- **Pesquisa de Mercado Facilitada**: Analistas podem comparar preÃ§os, duraÃ§Ãµes, cidades e caracterÃ­sticas de tours entre mÃºltiplos concorrentes em minutos, nÃ£o semanas
- **ReduÃ§Ã£o de Custos Operacionais**: EliminaÃ§Ã£o de trabalho manual, reduÃ§Ã£o de erros humanos, agilidade em processos
- **Vantagem Competitiva**: Acesso rÃ¡pido a inteligÃªncia de mercado para decisÃµes estratÃ©gicas de pricing e posicionamento

---

## ğŸ¯ PÃºblico Alvo

A soluÃ§Ã£o foi desenvolvida para trÃªs segmentos principais:

### 1. **Empresas de Marketplace de Viagens**
Plataformas que agregam ofertas de mÃºltiplas agÃªncias e prestadores. Para este pÃºblico, o sistema oferece:
- Onboarding automatizado de parceiros
- NormalizaÃ§Ã£o de dados de diferentes fontes
- ReduÃ§Ã£o de tempo para disponibilizar novas experiÃªncias na plataforma
- Possibilidade de embedar diretamente na sua infraestrutura

### 2. **Analistas de Mercado e Business Intelligence**
Profissionais que buscam entender o cenÃ¡rio competitivo de forma rÃ¡pida e confiÃ¡vel:
- ComparaÃ§Ã£o de preÃ§os entre competidores
- AnÃ¡lise de tendÃªncias de mercado
- IdentificaÃ§Ã£o de oportunidades de pricing
- GeraÃ§Ã£o rÃ¡pida de insights atravÃ©s de dados estruturados

### 3. **Donos de ExperiÃªncias TurÃ­sticas**
AgÃªncias locais, operadores de tours e experiÃªncias que precisam organizar e tabular seus prÃ³prios itinerÃ¡rios:
- EstruturaÃ§Ã£o organizada de suas experiÃªncias
- FacilitaÃ§Ã£o do envio de dados para plataformas
- AnÃ¡lise de sua prÃ³pria linha de produtos

---

## ğŸ’¡ Justificativa do Tema do Projeto

### Por Que Isto Ã‰ Importante

Imagine este cenÃ¡rio real: Uma startup de marketplace de viagens recebe **100 solicitaÃ§Ãµes mensais** de agÃªncias parceiras querendo cadastrar suas experiÃªncias. Cada agÃªncia envia um catÃ¡logo em PDF com suas ofertas. Hoje, um analista deve abrir cada PDF, ler manualmente, extrair informaÃ§Ãµes em planilhas, validar dados, e enviar para o time tÃ©cnico fazer o cadastro. **Esse processo leva, em mÃ©dia, 30 minutos por agÃªncia. SÃ£o 50 horas de trabalho mensal**.

Agora imagine: A mesma empresa implementa o Tour Extraction System. Uma agÃªncia envia o PDF. Em menos de 15 minutos, o sistema processa o documento inteiro, extrai **automaticamente** tÃ­tulos, localizaÃ§Ãµes, preÃ§os, duraÃ§Ãµes, descriÃ§Ãµes, observaÃ§Ãµes e todas as informaÃ§Ãµes estruturadas. Os dados jÃ¡ saem em Excel, prontos para integraÃ§Ã£o. **Os 50 horas viram 25 horas de validaÃ§Ã£o apenas. Uma reduÃ§Ã£o de 50% do tempo operacional.** - *Que pode ser esclada se houver hardware adequaado disponÃ­vel, aumentando a reduÃ§Ã£o do tempo de processamento*

Mas hÃ¡ mais: Os analistas de mercado que competem com essa startup podem agora fazer **anÃ¡lise competitiva em dias**, nÃ£o meses. Eles processam PDFs de 50 concorrentes simultaneamente, extraem dados estruturados, e tÃªm um retrato completo do mercado. DecisÃµes estratÃ©gicas que levavam semanas agora podem levar horas.

### O Que Agrega de Valor

#### Para Marketplaces de Viagens
O Tour Extraction System transforma **tempo de integraÃ§Ã£o em velocidade de crescimento**. Quanto mais rÃ¡pido uma plataforma consegue onboard novos parceiros, maior sua oferta, maior sua competitividade. Este sistema **multiplica a capacidade operacional** sem multiplicar a equipe.

#### Para Analistas de Mercado
Fornece **acesso democratizado a inteligÃªncia competitiva**. InformaÃ§Ãµes que antes eram monopÃ³lio de empresas com times grandes de anÃ¡lise agora estÃ£o ao alcance de equipes menores. **Iguala o jogo de mercado**.

#### Para Operadores de Turismo
Oferece **profissionalizaÃ§Ã£o e escalabilidade**. Uma agÃªncia pequena consegue estruturar seus dados da mesma forma que uma grande corporation, facilitando parcerias e expansÃ£o.

### Por fim: A TransformaÃ§Ã£o Digital do Turismo

O turismo Ã© a **segunda maior economia** de vÃ¡rios paÃ­ses. Mas enquanto tecnologia transformou varejo, finanÃ§as e educaÃ§Ã£o, o turismo ainda depende de **processos manuais, PDFs e planilhas**. AgÃªncias modernas convivem com sistemas antigos, dados desorganizados e impossibilidade de escala.

O Tour Extraction System Ã© o **elo perdido** dessa transformaÃ§Ã£o. Ã‰ IA que nÃ£o busca substituir humanos, mas **potencializar decisÃµes humanas**. Permite que um analista foque em estratÃ©gia, nÃ£o em digitaÃ§Ã£o. Permite que uma startup de viagens cresÃ§a 10x sem inchar sua equipe operacional. Permite que agÃªncias pequenas compitam no mesmo nÃ­vel que grandes players.

**Ã‰ democratizaÃ§Ã£o de tecnologia. Ã‰ velocidade de inovaÃ§Ã£o. Ã‰ transformaÃ§Ã£o digital real.**

---

## ğŸ”§ Detalhamento do Que Foi Desenvolvido

### VisÃ£o Geral da Arquitetura

O Tour Extraction System Ã© organizado em **4 etapas de processamento sequencial**, cada uma com responsabilidades especÃ­ficas, que se comunicam atravÃ©s de uma arquitetura modular e escalÃ¡vel.

```
INPUT (PDF)   â†’   [ETAPA 1]    â†’ [ETAPA 2]    â†’ [ETAPA 3]    â†’ [ETAPA 4]    â†’ OUTPUTS (XLSX)
                  Chunking       IndexaÃ§Ã£o      ExtraÃ§Ã£o       ExportaÃ§Ã£o   
                                 SemÃ¢ntica      com IA         & Refino     
```

---

### **ETAPA 1: Chunking de PDF** ğŸ“„
**Arquivo:** `src/processors/pdf_chunker.py`

#### Responsabilidade
Converter um PDF de mÃºltiplas pÃ¡ginas em **chunks de texto estruturado**, preparando o documento para as etapas seguintes.

#### Como Funciona
1. **InicializaÃ§Ã£o**: Configura o pipeline Docling com opÃ§Ãµes de OCR (Optical Character Recognition)
2. **DivisÃ£o**: Separa o PDF pÃ¡gina por pÃ¡gina usando PyPDF2
3. **ConversÃ£o**: Para cada pÃ¡gina:
   - Cria um PDF temporÃ¡rio contendo apenas aquela pÃ¡gina
   - Aplica OCR se habilitado (reconhecimento Ã³ptico para PDFs digitalizados)
   - Converte a pÃ¡gina para Markdown estruturado usando Docling
   - Salva como arquivo `.md` numerado (`page_001.md`, `page_002.md`, etc.)
4. **Limpeza**: Remove arquivos temporÃ¡rios para liberar memÃ³ria

#### Por Que Ã‰ Importante
- **OCR Integrado**: Permite processar PDFs digitalizados (imagens), nÃ£o apenas PDFs com texto nativo
- **Estrutura Markdown**: Preserva hierarquias do documento (tÃ­tulos, listas, tabelas)
- **Escalabilidade**: Processa pÃ¡gina por pÃ¡gina, permitindo PDFs de centenas de pÃ¡ginas
- **PreparaÃ§Ã£o**: Transforma um formato nÃ£o-estruturado (PDF visual) em texto estruturado (Markdown)

#### SaÃ­das Geradas
- `output/chunks/page_001.md`
- `output/chunks/page_002.md`
- ... (uma por pÃ¡gina do documento)

---

### **ETAPA 2: IndexaÃ§Ã£o SemÃ¢ntica** ğŸ”
**Arquivo:** `src/processors/semantic_indexer.py`

#### Responsabilidade
Criar um **Ã­ndice vetorial inteligente** que permite buscar informaÃ§Ãµes semanticamente relacionadas, independentemente de palavras-chave exatas.

#### Como Funciona
1. **Carregamento**: LÃª todos os chunks markdown gerados na Etapa 1
2. **Embeddings**: Usa o modelo `sentence-transformers/all-MiniLM-L6-v2` para gerar vetores (representaÃ§Ãµes numÃ©ricas do significado) de cada chunk
3. **IndexaÃ§Ã£o FAISS**: Cria um Ã­ndice FAISS (Facebook AI Similarity Search) otimizado para busca por similaridade de cosseno
4. **PersistÃªncia**: Salva:
   - Ãndice FAISS (`chunks.faiss`)
   - Embeddings em NumPy (`embeddings.npy`)
   - Mapeamento de arquivos (`files.json`)

#### Funcionalidade de Busca
```python
# Exemplo: Buscar chunks similares a um texto
similar_chunks = indexer.search_similar_chunks(
    "tours com duraÃ§Ã£o de 4 horas em Paris",
    top_k=3
)
```

#### Por Que Ã‰ Importante
- **Contexto SemÃ¢ntico**: Permite que a Etapa 3 (IA) compreenda melhor o contexto quando extrai informaÃ§Ãµes
- **Busca Inteligente**: Mesmo que um documento diga "3-4 horas" e o prompt procure "duraÃ§Ã£o de 4 horas", o sistema consegue correlacionar
- **ReduÃ§Ã£o de Erros**: IA recebe contexto relevante, reduzindo alucinaÃ§Ãµes e erros de extraÃ§Ã£o
- **Escalabilidade**: FAISS Ã© otimizado para buscas rÃ¡pidas mesmo em indices grandes

#### SaÃ­das Geradas
- `output/index/chunks.faiss` (Ãndice vetorial)
- `output/index/embeddings.npy` (Vetores numÃ©ricos)
- `output/index/files.json` (Mapeamento de chunks)

---

### **ETAPA 3: ExtraÃ§Ã£o de Tours com IA** ğŸ¤–
**Arquivo:** `src/processors/tour_extractor.py`

#### Responsabilidade
Usar **InteligÃªncia Artificial (CrewAI com GPT-4o-mini)** para extrair informaÃ§Ãµes estruturadas de tours a partir dos chunks textuais.

#### Como Funciona

**A. ConfiguraÃ§Ã£o de Agente IA**
```python
agent = Agent(
    role="Extrator Universal Multi-Idioma de Tours",
    goal="Extrair informaÃ§Ãµes completas de tours/tarifÃ¡rios",
    backstory="Especialista em catÃ¡logos turÃ­sticos globais..."
)
```

**B. Processamento Paralelo**
- Divide chunks entre mÃºltiplos workers (padrÃ£o: 5)
- Aplica rate limiting para nÃ£o sobrecarregar API OpenAI (50 req/min)
- Para cada chunk, executa:
  1. **Busca SemÃ¢ntica**: Usa indexador para encontrar chunks similares (contexto expandido)
  2. **Prompt Estruturado**: Envia chunk + contexto para IA com instruÃ§Ãµes especÃ­ficas
  3. **ExtraÃ§Ã£o JSON**: IA retorna dados estruturados em JSON
  4. **ValidaÃ§Ã£o**: Valida estrutura JSON antes de persistir

**C. Multi-Idioma e Multi-Formato**
- Detecta idioma automaticamente
- Suporta formatos europeus (vÃ­rgula como separador decimal)
- Suporta formatos latino-americanos
- Processa portuguÃªs, inglÃªs, espanhol e francÃªs

**D. Schema de ExtraÃ§Ã£o (20+ Campos)**
```json
{
  "id": "1",
  "city": "Paris",
  "title": "Sightseeing tour with english speaking driver",
  "location": {
    "main": "Paris",
    "region": "Ile-de-France",
    "zone": null
  },
  "duration": {
    "quantity": 4,
    "unit": "hours"
  },
  "description": "Complete description...",
  "pricing_type": "per_vehicle",
  "options": [{
    "name_option": "Car/Van with driver",
    "details": [{
      "capacity": "01-03 pax",
      "vehicle_options": "car",
      "price": {
        "quantity": 625,
        "currency": "EUR"
      }
    }]
  }],
  "schedule": {...},
  "meeting_point": "Hotel lobby",
  "includes": ["Guide", "Transport"],
  "excludes": ["Meals"],
  "language_options": ["english", "french"],
  "operation": {...},
  "min_booking": 2,
  "observations": "Additional notes...",
  "source_chunks": ["page_001.md"]
}
```

#### Por Que Ã‰ Importante
- **IA Atuante**: NÃ£o Ã© um simples parser regex, Ã© IA que compreende contexto
- **ParallelizaÃ§Ã£o**: Processa mÃºltiplos chunks simultaneamente, acelerando extraÃ§Ã£o
- **Rate Limiting**: Gerencia custos e evita erros de API
- **Contexto Expandido**: Busca semÃ¢ntica fornece mais informaÃ§Ã£o Ã  IA, melhorando precisÃ£o
- **Estrutura Robusta**: JSON estruturado facilita integraÃ§Ã£o com sistemas downstream

#### SaÃ­das Geradas
- JSON estruturado com todos os tours extraÃ­dos
- Metadados de extraÃ§Ã£o (chunks fonte, confianÃ§a, etc.)

---

### **ETAPA 4: ExportaÃ§Ã£o e Refinamento** ğŸ“Š
**Arquivos:** `src/processors/result_exporter.py` e `src/processors/result_refiner.py`

#### Etapa 4A: ExportaÃ§Ã£o Bruta (`result_exporter.py`)

**Responsabilidade**: Converter JSON estruturado em mÃºltiplos formatos de saÃ­da.

**Processo JSON**
- Salva JSON completo com toda a hierarquia original
- Preserva todas as opÃ§Ãµes, preÃ§os, detalhes
- Formato: `tours_extracted.json`

**Processo Excel Bruto**
- **NormalizaÃ§Ã£o**: Expande estruturas aninhadas (opÃ§Ãµes, preÃ§os, etc.)
- **Multi-formato**: 
  - Formato europeu: Uma linha por opÃ§Ã£o de veÃ­culo
  - Formato latino: Uma linha por matriz de preÃ§os
- **Colunas (30+)**: ID, City, Title, Location Main/Region/Zone, Description, Duration, Schedule, Pricing Type, Option Name, Capacity, Vehicle Options, Price, Currency, e mais
- **Formato**: `tours_extracted.xlsx`

#### Etapa 4B: Refinamento Final (`result_refiner.py`)

**Responsabilidade**: Criar versÃ£o limpa, deduplica e otimizada para o usuÃ¡rio final.

**Processo de Refinamento**

1. **SeleÃ§Ã£o de Campos Essenciais**: Filtra apenas 9 campos principais
2. **OtimizaÃ§Ã£o de PreÃ§os**: 
   - Varre **todas as opÃ§Ãµes disponÃ­veis**
   - Seleciona o **menor preÃ§o encontrado** (estratÃ©gia inteligente para comparaÃ§Ãµes)
   - MantÃ©m moeda correspondente
   - Nunca perde informaÃ§Ã£o: se havia preÃ§o, sempre encontra
3. **DeduplicaÃ§Ã£o**: Remove linhas duplicadas por Title + Location Main
4. **FormataÃ§Ã£o**: Renomeia colunas para legibilidade com espaÃ§os

**Campos do Excel Refinado (9 Essenciais)**
- Title
- Location Main  
- Description
- Duration
- Duration Unit
- Min Adults
- Observations  
- Price (menor preÃ§o de todas as opÃ§Ãµes)
- Currency

**Formato**: `tours_extracted_refined.xlsx`

#### Por Que Essas SaÃ­das

| Formato | PÃºblico-Alvo | Uso |
|---------|-------------|-----|
| **JSON** | Desenvolvedores, IntegraÃ§Ãµes | APIs, sistemas backend, processamento automÃ¡tico |
| **Excel Bruto** | Analistas, Power Users | AnÃ¡lise detalhada, pesquisa de mercado, comparaÃ§Ãµes especÃ­ficas |
| **Excel Refinado** | UsuÃ¡rios Finais, Dashboards | VisualizaÃ§Ã£o limpa, relatÃ³rios, integraÃ§Ã£o em BI |

---

## ğŸ¨ Interface de UsuÃ¡rio - Streamlit

### Responsabilidade
Fornecer interface web intuitiva e sem necessidade de conhecimento tÃ©cnico para processar PDFs.

### Funcionalidades

**1. Upload Simples**
- Drag-and-drop de PDFs
- ValidaÃ§Ã£o automÃ¡tica de formato
- ExibiÃ§Ã£o de tamanho do arquivo

**2. Processamento Transparente**
- Barra de progresso visual
- Logs em tempo real de cada etapa
- Feedback claro sobre andamento

**3. VisualizaÃ§Ã£o de Resultados**
- **Primeiras 100 linhas** do Excel completo (preview)
- **EstatÃ­sticas**: Total de tours e cidades extraÃ­das
- Tabela interativa com scroll

**4. Design Clean**
- Sidebar minimalista com apenas configuraÃ§Ãµes essenciais
- Layout responsivo (wide)
- InstruÃ§Ãµes acessÃ­veis para novos usuÃ¡rios

---

## ğŸ—ï¸ Arquitetura TÃ©cnica Completa

### Componentes de Apoio

#### **Gerenciamento de ConfiguraÃ§Ã£o** (`config.py`)
- Centraliza todas as configuraÃ§Ãµes do sistema
- Carrega parÃ¢metros de `settings.yaml`
- Valida configuraÃ§Ãµes obrigatÃ³rias
- Oferece interface estruturada com `SystemConfig`

#### **Sistema de Logging** (`logger.py`)
- Logs estruturados com nÃ­veis (DEBUG, INFO, WARNING, ERROR)
- SaÃ­da no console com timestamps
- Rastreamento de progresso por etapa
- IntegraÃ§Ã£o com Streamlit para exibiÃ§Ã£o em tempo real

#### **Rate Limiting** (`rate_limiter.py`)
- Controla requisiÃ§Ãµes para OpenAI API
- Implementa sliding window (janela deslizante)
- Previne erros por "quota exceeded"
- Permite configuraÃ§Ã£o de limite por minuto

#### **Pipeline Principal** (`pipeline.py`)
- Orquestra execuÃ§Ã£o sequencial das 4 etapas
- Gerencia dependÃªncias entre componentes
- Logs de progresso e estatÃ­sticas finais
- Tratamento robusto de erros por etapa

#### **ConfiguraÃ§Ãµes** (`settings.yaml`)
```yaml
# Controla todos os parÃ¢metros do sistema
directories:
  uploads: "uploads"
  chunks: "output/chunks"
  index: "output/index"
  results: "output/results"

pdf_processing:
  enable_ocr: true
  pages_per_chunk: 1

extraction:
  llm_model: "openai/gpt-4o-mini"
  temperature: 0.0
  max_workers: 5
  rate_limit_per_minute: 50
```

---

## ğŸ“ˆ Fluxograma do Sistema

![FluxoGrama](figure.svg)

> **DescriÃ§Ã£o:**
> O fluxo inicia com a entrada de um catÃ¡logo turÃ­stico em PDF por meio da interface Streamlit, passando por um pipeline de processamento que realiza o chunking do PDF, indexaÃ§Ã£o semÃ¢ntica com FAISS, extraÃ§Ã£o de informaÃ§Ãµes de tours via agentes CrewAI em mÃºltiplos idiomas, e estruturaÃ§Ã£o dos dados em JSON. Os resultados sÃ£o exportados e refinados em duas etapas, gerando tanto um Excel bruto quanto um refinado, e apresentados em uma interface web para visualizaÃ§Ã£o e download pelo usuÃ¡rio, com suporte a debug interno para testes e validaÃ§Ãµes.

---

## ğŸ“± Fluxo de Uso - Perspectiva do UsuÃ¡rio

![FluxoGrama](figure_2.svg)

> **DescriÃ§Ã£o:**
> O fluxo comeÃ§a com a entrada do PDF do catÃ¡logo turÃ­stico, que Ã© processado por um pipeline central (incluindo Streamlit), passando por etapas integradas de chunking e indexaÃ§Ã£o semÃ¢ntica, seguidas por extraÃ§Ã£o automatizada de tours via agentes CrewAI, resultando em dados refinados e estruturados. Esses dados sÃ£o exportados e otimizados em Excel bruto e refinado, disponibilizados em uma interface web para visualizaÃ§Ã£o e download pelo usuÃ¡rio, com suporte adicional a testes e validaÃ§Ã£o interna por debug dedicado.

---

## ğŸ”„ Como as PeÃ§as Se Encaixam

### Exemplo PrÃ¡tico: Processando um PDF de 5 PÃ¡ginas

**Entrada**: PDF de catÃ¡logo turÃ­stico de agÃªncia em Paris com 5 pÃ¡ginas

**Etapa 1 - Chunking**:
```
page_001.pdf â†’ Docling â†’ page_001.md (com estrutura markdown)
page_002.pdf â†’ Docling â†’ page_002.md
page_003.pdf â†’ Docling â†’ page_003.md
page_004.pdf â†’ Docling â†’ page_004.md
page_005.pdf â†’ Docling â†’ page_005.md
```

**Etapa 2 - IndexaÃ§Ã£o**:
```
[page_001.md, page_002.md, page_003.md, page_004.md, page_005.md]
         â†“ (sentence-transformers)
[vec1, vec2, vec3, vec4, vec5] â†’ FAISS Index
         â†“
Agora Ã© possÃ­vel buscar: "tours em Paris" e encontrar chunks relevantes
```

**Etapa 3 - ExtraÃ§Ã£o**:
```
Worker 1: page_001.md + [vec2, vec3] (chunks similares) â†’ CrewAI â†’ JSON Tours 1-3
Worker 2: page_002.md + [vec1, vec4] (chunks similares) â†’ CrewAI â†’ JSON Tours 4-7
Worker 3: page_003.md + [vec5] (chunks similares)       â†’ CrewAI â†’ JSON Tours 8-10
Worker 4: page_004.md + [vec1, vec2] (chunks similares) â†’ CrewAI â†’ JSON Tours 11-14
Worker 5: page_005.md + [vec3, vec4] (chunks similares) â†’ CrewAI â†’ JSON Tours 15-18

Total: 18 tours extraÃ­dos em ~2 minutos (parallelizado)
```

**Etapa 4A - ExportaÃ§Ã£o Bruta**:
```
JSON (18 tours, hierarquia completa)
     â†“ (NormalizaÃ§Ã£o)
Excel Bruto: 45 linhas Ã— 30 colunas
(mÃºltiplas linhas por tour devido a diferentes opÃ§Ãµes/preÃ§os)
```

**Etapa 4B - Refinamento**:
```
Excel Bruto (45 linhas)
     â†“ (Menor preÃ§o + DeduplicaÃ§Ã£o)
Excel Refinado: 18 linhas Ã— 9 colunas
(uma linha por tour, com menor preÃ§o)
```

**Etapa 5 - Interface Streamlit**:
```
Excel Refinado (18 linhas)
     â†“ (Preview + Stats)
Tabela: 18 linhas Ã— 9 colunas
Stats: "18 tours | 1 cidade"
     â†“ (Download)
UsuÃ¡rio baixa: tours_extracted.xlsx (completo, 45 linhas)
```

---

## ğŸ’» Stack TecnolÃ³gico

| Componente | Tecnologia | Justificativa |
|-----------|-----------|---------------|
| **PDF Processing** | Docling | OCR avanÃ§ado, suporte multi-formato |
| **Text Splitting** | PyPDF2 | DivisÃ£o confiÃ¡vel pÃ¡gina por pÃ¡gina |
| **Embeddings** | Sentence-Transformers | Modelos leves, rÃ¡pidos, acurados |
| **IndexaÃ§Ã£o Vetorial** | FAISS | Busca semÃ¢ntica otimizada, escalÃ¡vel |
| **IA / LLM** | CrewAI + OpenAI | Agentes autÃ´nomos, multi-objetivo |
| **Data Processing** | Pandas | ManipulaÃ§Ã£o de dados robusta |
| **Excel Export** | Openpyxl | FormataÃ§Ã£o avanÃ§ada, compatibilidade |
| **Web Interface** | Streamlit | Desenvolvimento rÃ¡pido, sem JS |
| **Configuration** | YAML | FÃ¡cil customizaÃ§Ã£o, sem cÃ³digo |
| **Logging** | Python Logging | Rastreamento de execuÃ§Ã£o |

---

## ğŸ“Š MÃ©tricas de Performance

### Tempo de Processamento

| OperaÃ§Ã£o | Tempo TÃ­pico |
|----------|-------------|
| Chunking (1 pÃ¡gina) | 10-120s (com OCR) |
| IndexaÃ§Ã£o (13 pÃ¡ginas) | 5-20s |
| ExtraÃ§Ã£o (13 chunks, 5 workers) | 2-8 minutos |
| ExportaÃ§Ã£o | 2-5s |
| Refinamento | 1-2s |
| **Total (13 pÃ¡ginas, ~45 tours)** | **~3-10 minutos** |

---

## ğŸ” SeguranÃ§a e Conformidade

### ConsideraÃ§Ãµes Implementadas

- **API Keys**: Armazenadas em `.env`, nunca no cÃ³digo
- **Processamento TemporÃ¡rio**: PDFs sÃ£o processados em temp files e imediatamente deletados
- **Sem Armazenamento de Dados**: Apenas dados finais sÃ£o salvos em Excel
- **Logs Estruturados**: Rastreamento completo sem exposiÃ§Ã£o de dados sensÃ­veis
- **Session State**: Dados do usuÃ¡rio isolados por sessÃ£o Streamlit

---

## ğŸ“¦ DependÃªncias Principais

```
crewai==0.86.0          # Framework de agentes IA
openai==1.55.3          # API OpenAI
docling==2.12.1         # ConversÃ£o PDF
sentence-transformers   # Embeddings
faiss-cpu==1.9.0        # IndexaÃ§Ã£o vetorial
pandas==2.2.3           # ManipulaÃ§Ã£o de dados
streamlit==1.40.1       # Interface web
```

---

## ğŸŒ RepositÃ³rio do Projeto

### Estrutura do RepositÃ³rio

```
tour-extraction-system/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/                    # Componentes centrais
â”‚   â”‚   â”œâ”€â”€ config.py           # Gerenciamento de configuraÃ§Ãµes
â”‚   â”‚   â””â”€â”€ logger.py           # Sistema de logging
â”‚   â”œâ”€â”€ processors/             # Processadores principais
â”‚   â”‚   â”œâ”€â”€ pdf_chunker.py      # ConversÃ£o PDF â†’ Markdown
â”‚   â”‚   â”œâ”€â”€ semantic_indexer.py # IndexaÃ§Ã£o FAISS
â”‚   â”‚   â”œâ”€â”€ tour_extractor.py   # ExtraÃ§Ã£o com IA
â”‚   â”‚   â”œâ”€â”€ result_exporter.py  # ExportaÃ§Ã£o JSON/Excel
â”‚   â”‚   â””â”€â”€ result_refiner.py   # Refinamento final
â”‚   â”œâ”€â”€ utils/                  # UtilitÃ¡rios
â”‚   â”‚   â””â”€â”€ rate_limiter.py     # Controle de requisiÃ§Ãµes
â”‚   â”œâ”€â”€ schemas.py              # Esquemas de dados
â”‚   â””â”€â”€ pipeline.py             # Orquestrador principal
â”œâ”€â”€ config/
â”‚   â””â”€â”€ settings.yaml           # ConfiguraÃ§Ãµes do sistema
â”œâ”€â”€ app.py                      # Interface Streamlit
â”œâ”€â”€ main.py                     # CLI (Ponto de entrada)
â”œâ”€â”€ .venv                       # Ambiente Virtual
```

### Como Usar o RepositÃ³rio

```bash
# 1. Clone o repositÃ³rio
git clone https://github.com/I2A2_Agentes_Inteligentes/tour-extraction-system.git
cd tour-extraction-system

# 2. Instale dependÃªncias
pip install -r requirements.txt

# 3. Configure ambiente
cp .env.example .env
# Edite .env com sua OPENAI_API_KEY

# 4. Execute
streamlit run app.py
```

---

## ğŸ“ˆ Roadmap Futuro

### Curto Prazo (1-2 meses)
- [ ] Suporte a mÃºltiplos formatos (Word, HTML, imagens)
- [ ] Cache inteligente de embeddings
- [ ] Dashboard com estatÃ­sticas avanÃ§adas do processamento
- [ ] Possibilidade de utilizaÃ§Ã£o de outras LLMs

### MÃ©dio Prazo (3-6 meses)
- [ ] API REST para integraÃ§Ã£o
- [ ] Modelos de IA locais (Ollama)
- [ ] Processamento batch de mÃºltiplos PDFs

### Longo Prazo (6-12 meses)
- [ ] Marketplace de integraÃ§Ãµes
- [ ] RelatÃ³rios automÃ¡ticos de anÃ¡lise

---

**Desenvolvido pelo Grupo 287 - I2A2 Agentes Inteligentes**

Data de ConclusÃ£o: 30 de Outubro de 2025
